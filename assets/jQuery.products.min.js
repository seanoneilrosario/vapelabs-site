jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};Shopify.Products=function(){var e={howManyToShow:3,howManyToStoreInMemory:10,wrapperId:"recently-viewed-products",wrapperIdwrap:"recently-viewed-products-wrap",templateId:"recently-viewed-product-template",onComplete:null},n=[],t=null,r=null,o=0,i={configuration:{expires:90,path:"/",domain:window.location.hostname},name:"shopify_recently_viewed",write:function(e){jQuery.cookie(this.name,e.join(" "),this.configuration)},read:function(){var e=[],n=jQuery.cookie(this.name);return null!==n&&(e=n.split(" ")),e},destroy:function(){jQuery.cookie(this.name,null,this.configuration)},remove:function(e){var n=this.read(),t=jQuery.inArray(e,n);-1!==t&&(n.splice(t,1),this.write(n))}},a=function(){n.length&&o<e.howManyToShow?jQuery.ajax({dataType:"json",url:"/products/"+n[0]+".js",cache:!1,success:function(e){r.tmpl(e).appendTo(t),n.shift(),o++,a()},error:function(){i.remove(n[0]),n.shift(),a()}}):function(){if(t.show(),hw.show(),e.onComplete)try{e.onComplete()}catch(e){}}()};return{resizeImage:function(e,n){if(null==n)return e;if("master"==n)return e.replace(/http(s)?:/,"");var t=e.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?/i);if(null!=t){var r=e.split(t[0]),o=t[0];return(r[0]+"_"+n+o).replace(/http(s)?:/,"")}return null},showRecentlyViewed:function(o){o=o||{};jQuery.extend(e,o),n=i.read(),r=jQuery("#"+e.templateId),t=jQuery("#"+e.wrapperId),hw=jQuery("#"+e.wrapperIdwrap),e.howManyToShow=Math.min(n.length,e.howManyToShow),e.howManyToShow&&r.length&&t.length&&a()},getConfig:function(){return e},clearList:function(){i.destroy()},recordRecentlyViewed:function(n){n=n||{};jQuery.extend(e,n);var t=i.read();if(-1!==window.location.pathname.indexOf("/products/")){var r=window.location.pathname.match(/\/products\/([a-z0-9\-]+)/)[1],o=jQuery.inArray(r,t);-1===o?(t.unshift(r),t=t.splice(0,e.howManyToStoreInMemory)):(t.splice(o,1),t.unshift(r)),i.write(t)}}}}()